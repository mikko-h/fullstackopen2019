{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","services_persons","axios","get","then","response","data","newPerson","post","id","delete","concat","updatedPerson","put","Notification","_ref","message","type","react_default","a","createElement","className","Filter","_ref2","handleChange","onChange","PersonForm","_ref3","handleNameChange","handleNumberChange","handleSubmit","newName","newNumber","onSubmit","value","Person","_ref4","name","number","handleRemove","onClick","Persons","_ref5","persons","filter","map","person","App_Person","Object","assign","key","App","_useState","useState","_useState2","slicedToArray","notification","setNotification","_useState3","_useState4","setPersons","_useState5","_useState6","nameFilter","setNameFilter","_useState7","_useState8","setNewName","_useState9","_useState10","setNewNumber","showNotification","arguments","length","undefined","setTimeout","setState","event","target","useEffect","personsService","App_Notification","App_Filter","App_PersonForm","existingPerson","find","p","preventDefault","window","confirm","objectSpread","catch","err","error","App_Persons","toLowerCase","indexOf","personToRemove","ReactDOM","render","src_App","document","getElementById"],"mappings":"6NAEMA,EAAU,eAgBDC,EAdA,kBAAMC,IAClBC,IAAIH,GACJI,KAAK,SAAAC,GAAQ,OAAIA,EAASC,QAYdL,EAVA,SAAAM,GAAS,OAAIL,IACzBM,KAAKR,EAASO,GACdH,KAAK,SAAAC,GAAQ,OAAIA,EAASC,QAQdL,EANA,SAAAQ,GAAE,OAAIP,IAAMQ,OAAN,GAAAC,OAAgBX,EAAhB,KAAAW,OAA2BF,KAMjCR,EAJA,SAAAW,GAAa,OAAIV,IAC7BW,IAD6B,GAAAF,OACtBX,EADsB,KAAAW,OACXC,EAAcH,IAAMG,GACtCR,KAAK,SAAAC,GAAQ,OAAIA,EAASC,QCTvBQ,SAAe,SAAAC,GAAuB,IAApBC,EAAoBD,EAApBC,QAASC,EAAWF,EAAXE,KAC/B,OAAID,EAEAE,EAAAC,EAAAC,cAAA,OAAKC,UAAWJ,GACbD,GAKA,OAGHM,EAAS,SAAAC,GAAA,IAAEC,EAAFD,EAAEC,aAAF,OACbN,EAAAC,EAAAC,cAAA,yCACoBF,EAAAC,EAAAC,cAAA,SAAOK,SAAUD,MAIjCE,EAAa,SAAAC,GAAA,IACjBC,EADiBD,EACjBC,iBACAC,EAFiBF,EAEjBE,mBACAC,EAHiBH,EAGjBG,aACAC,EAJiBJ,EAIjBI,QACAC,EALiBL,EAKjBK,UALiB,OAOjBd,EAAAC,EAAAC,cAAA,QAAMa,SAAUH,GACdZ,EAAAC,EAAAC,cAAA,oBACQF,EAAAC,EAAAC,cAAA,SAAOc,MAAOH,EAASN,SAAUG,KAEzCV,EAAAC,EAAAC,cAAA,sBACUF,EAAAC,EAAAC,cAAA,SAAOc,MAAOF,EAAWP,SAAUI,KAE7CX,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,UAAQH,KAAK,UAAb,kBAKAkB,EAAS,SAAAC,GAAA,IAAEC,EAAFD,EAAEC,KAAMC,EAARF,EAAQE,OAAQC,EAAhBH,EAAgBG,aAAhB,OACbrB,EAAAC,EAAAC,cAAA,WAAMiB,EAAN,IAAaC,EAAb,IAAqBpB,EAAAC,EAAAC,cAAA,UAAQoB,QAASD,GAAjB,YAGjBE,EAAU,SAAAC,GAAA,IAAEC,EAAFD,EAAEC,QAASC,EAAXF,EAAWE,OAAQL,EAAnBG,EAAmBH,aAAnB,OACdI,EACGC,OAAOA,GACPC,IAAI,SAAAC,GAAM,OAAK5B,EAAAC,EAAAC,cAAC2B,EAADC,OAAAC,OAAA,CAAQC,IAAKJ,EAAOT,KAAME,aAAc,kBAAMA,EAAaO,EAAOrC,MAASqC,OAuGhFK,EArGH,WAAM,IAAAC,EAC0BC,mBAAS,MADnCC,EAAAN,OAAAO,EAAA,EAAAP,CAAAI,EAAA,GACRI,EADQF,EAAA,GACMG,EADNH,EAAA,GAAAI,EAEgBL,mBAAS,IAFzBM,EAAAX,OAAAO,EAAA,EAAAP,CAAAU,EAAA,GAERf,EAFQgB,EAAA,GAECC,EAFDD,EAAA,GAAAE,EAGsBR,mBAAS,IAH/BS,EAAAd,OAAAO,EAAA,EAAAP,CAAAa,EAAA,GAGRE,EAHQD,EAAA,GAGIE,EAHJF,EAAA,GAAAG,EAIgBZ,mBAAS,IAJzBa,EAAAlB,OAAAO,EAAA,EAAAP,CAAAiB,EAAA,GAIRlC,EAJQmC,EAAA,GAICC,EAJDD,EAAA,GAAAE,EAKoBf,mBAAS,IAL7BgB,EAAArB,OAAAO,EAAA,EAAAP,CAAAoB,EAAA,GAKRpC,EALQqC,EAAA,GAKGC,EALHD,EAAA,GAOVE,EAAmB,SAACvD,GAAiC,IAAxBC,EAAwBuD,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAxDxC,UAyDjBf,EAAgB,CAAEzC,UAASC,SAC3B0D,WAAW,kBAAMlB,EAAgB,OAAO,MAGpCjC,EAAe,SAAAoD,GAAQ,OAAI,SAAAC,GAAK,OAAID,EAASC,EAAMC,OAAO5C,SAqEhE,OANA6C,oBAAU,WACRC,IAEG5E,KAAK,SAAAuC,GAAO,OAAIiB,EAAWjB,MAC7B,IAGDzB,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,6BACAF,EAAAC,EAAAC,cAAC6D,EAAiBzB,GAClBtC,EAAAC,EAAAC,cAAC8D,EAAD,CAAQ1D,aAAcA,EAAawC,KACnC9C,EAAAC,EAAAC,cAAA,8BACAF,EAAAC,EAAAC,cAAC+D,EAAD,CACEvD,iBAAkBJ,EAAa2C,GAC/BtC,mBAAoBL,EAAa8C,GACjCxC,aA1DY,SAAC+C,GACjB,IALmB/B,EAKbvC,EAAY,CAAE8B,KAAMN,EAASO,OAAQN,GACrCoD,GANatC,EAMiBvC,EANPoC,EAAQ0C,KAAK,SAAAC,GAAC,OAAIA,EAAEjD,OAASS,EAAOT,QAQjEwC,EAAMU,iBAEFH,EACmBI,OAAOC,QAAP,GAAA9E,OAAkBoB,EAAlB,2DAGnBiD,EAAAhC,OAAA0C,EAAA,EAAA1C,CAAA,GAEOoC,EAFP,CAGI9C,OAAQN,KAET5B,KAAK,SAAA0C,GACJc,EAAWjB,EAAQE,IAAI,SAAAyC,GAAC,OAAIA,EAAE7E,KAAOqC,EAAOrC,GAAKqC,EAASwC,KAC1DnB,EAAW,IACXG,EAAa,IACbC,EAAgB,0BAAA5D,OAAwBmC,EAAOT,KAA/B,cAEjBsD,MAAM,WACL/B,EAAWjB,EAAQC,OAAO,SAAA0C,GAAC,OAAIA,EAAE7E,KAAO2E,EAAe3E,MACvD0D,EAAW,IACXG,EAAa,IACbC,EAAgB,GAAA5D,OAAIyE,EAAe/C,KAAnB,oBA3GT,WA+Gb2C,EACUzE,GACPH,KAAK,SAAA0C,GACJc,EAAWjB,EAAQhC,OAAOmC,IAC1BqB,EAAW,IACXG,EAAa,IACbC,EAAgB,gBAAA5D,OAAcmC,EAAOT,SAEtCsD,MAAM,SAAAC,GACLrB,EAAiBqB,EAAIvF,SAASC,KAAKuF,MAxH1B,YA6IX9D,QAASA,EACTC,UAAWA,IAEbd,EAAAC,EAAAC,cAAA,qBACAF,EAAAC,EAAAC,cAAC0E,EAAD,CAASnD,QAASA,EAASC,OAjEV,SAAAE,GAAM,OAAIA,EAAOT,KAAK0D,cAAcC,QAAQjC,EAAWgC,gBAAkB,GAiEzCxD,aAjFhC,SAAC9B,GACpB,IAAMwF,EAAiBtD,EAAQ0C,KAAK,SAAAC,GAAC,OAAIA,EAAE7E,KAAOA,IAC7B+E,OAAOC,QAAP,gBAAA9E,OAA+BsF,EAAe5D,KAA9C,OAGnB2C,EACUvE,GACPL,KAAK,WACJwD,EAAWjB,EAAQC,OAAO,SAAA0C,GAAC,OAAIA,EAAE7E,KAAOA,KACxC8D,EAAgB,eAAA5D,OAAgBsF,EAAe5D,cCzEzD6D,IAASC,OAAOjF,EAAAC,EAAAC,cAACgF,EAAD,MAASC,SAASC,eAAe","file":"static/js/main.b31479ab.chunk.js","sourcesContent":["import axios from 'axios'\n\nconst baseUrl = '/api/persons'\n\nconst getAll = () => axios\n  .get(baseUrl)\n  .then(response => response.data)\n\nconst create = newPerson => axios\n  .post(baseUrl, newPerson)\n  .then(response => response.data)\n\nconst remove = id => axios.delete(`${baseUrl}/${id}`)\n\nconst update = updatedPerson => axios\n  .put(`${baseUrl}/${updatedPerson.id}`, updatedPerson)\n  .then(response => response.data)\n\nexport default {\n  getAll,\n  create,\n  remove,\n  update\n}","import React, { useState, useEffect } from 'react'\nimport personsService from './services/persons'\nimport './index.css'\n\nconst TYPE_ERROR = 'error'\nconst TYPE_SUCCESS = 'success'\n\nconst Notification = ({ message, type }) => {\n  if (message) {\n    return (\n      <div className={type}>\n        {message}\n      </div>\n    )\n  }\n\n  return null\n}\n\nconst Filter = ({handleChange}) => (\n  <div>\n    rajaa näytettäviä <input onChange={handleChange} />\n  </div>\n)\n\nconst PersonForm = ({\n  handleNameChange,\n  handleNumberChange,\n  handleSubmit,\n  newName,\n  newNumber\n}) => (\n  <form onSubmit={handleSubmit}>\n    <div>\n      nimi: <input value={newName} onChange={handleNameChange} />\n    </div>\n    <div>\n      numero: <input value={newNumber} onChange={handleNumberChange} />\n    </div>\n    <div>\n      <button type=\"submit\">lisää</button>\n    </div>\n  </form>\n)\n\nconst Person = ({name, number, handleRemove}) => (\n  <div>{name} {number} <button onClick={handleRemove}>poista</button></div>\n)\n\nconst Persons = ({persons, filter, handleRemove}) =>\n  persons\n    .filter(filter)\n    .map(person => (<Person key={person.name} handleRemove={() => handleRemove(person.id)} {...person} />))\n\nconst App = () => {\n  const [ notification, setNotification ] = useState(null)\n  const [ persons, setPersons ] = useState([]) \n  const [ nameFilter, setNameFilter ] = useState('')\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n\n  const showNotification = (message, type = TYPE_SUCCESS) => {\n    setNotification({ message, type })\n    setTimeout(() => setNotification(null), 5000)\n  } \n\n  const handleChange = setState => event => setState(event.target.value)\n\n  const handleRemove = (id) => {\n    const personToRemove = persons.find(p => p.id === id)\n    const confirmation = window.confirm(`Poistetaanko ${personToRemove.name}?`)\n\n    if (confirmation) {\n      personsService\n        .remove(id)\n        .then(() => {\n          setPersons(persons.filter(p => p.id !== id))\n          showNotification(`Poistettiin ${personToRemove.name}`)\n        })\n    }\n  }\n\n  const personExists = person => persons.find(p => p.name === person.name)\n\n  const personFilter = person => person.name.toLowerCase().indexOf(nameFilter.toLowerCase()) > -1\n\n  const addPerson = (event) => {\n    const newPerson = { name: newName, number: newNumber }\n    const existingPerson = personExists(newPerson)\n\n    event.preventDefault()\n\n    if (existingPerson) {\n      const confirmation = window.confirm(`${newName} on jo luettelossa, korvataanko vanha numero uudella?`)\n      \n      if (confirmation) {\n        personsService\n          .update({\n            ...existingPerson,\n            number: newNumber\n          })\n          .then(person => {\n            setPersons(persons.map(p => p.id === person.id ? person : p))\n            setNewName('')\n            setNewNumber('')\n            showNotification(`Muutettiin henkilön ${person.name} numero`)\n          })\n          .catch(() => {\n            setPersons(persons.filter(p => p.id !== existingPerson.id))\n            setNewName('')\n            setNewNumber('')\n            showNotification(`${existingPerson.name} on jo poistettu`, TYPE_ERROR)\n          })\n      }\n    } else {\n      personsService\n        .create(newPerson)\n        .then(person => {\n          setPersons(persons.concat(person))\n          setNewName('')\n          setNewNumber('')\n          showNotification(`Lisättiin ${person.name}`) \n        })\n        .catch(err => {\n          showNotification(err.response.data.error, TYPE_ERROR)\n        })\n    }\n  }\n\n  useEffect(() => {\n    personsService\n      .getAll()\n      .then(persons => setPersons(persons))\n  }, [])\n\n  return (\n    <div>\n      <h1>Puhelinluettelo</h1>\n      <Notification {...notification} />\n      <Filter handleChange={handleChange(setNameFilter)} />\n      <h2>Lisää uusi</h2>\n      <PersonForm\n        handleNameChange={handleChange(setNewName)}\n        handleNumberChange={handleChange(setNewNumber)}\n        handleSubmit={addPerson}\n        newName={newName}\n        newNumber={newNumber}\n      />\n      <h2>Numerot</h2>\n      <Persons persons={persons} filter={personFilter} handleRemove={handleRemove} />\n    </div>\n  )\n\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}